function e(e,t,n,l){return new(n||(n=Promise))((function(i,r){function o(e){try{d(l.next(e))}catch(e){r(e)}}function a(e){try{d(l.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}d((l=l.apply(e,t||[])).next())}))}function t(){const e=document.createElement("div");return e.classList.add("treexplorer-main"),e.role="tree",e.ariaMultiSelectable="false",e.style.setProperty("--indent-2","var(--indent, 1rem)"),e.style.setProperty("--arrow-div-width-2","var(--arrow-div-width, 1.5rem)"),e.style.setProperty("--children-line-width-2","var(--children-line-width, 1px)"),e.style.height="100%",e.style.overflow="auto",e.style.display="grid",e.style.alignContent="start",e}function n(e){const t=document.createElement("div");t.style.userSelect="none";const n=document.createElement("div");n.id=e,n.classList.add("treexplorer-node"),n.style.cursor="pointer",n.style.display="grid",n.style.gridTemplateColumns="var(--arrow-div-width-2) auto",n.style.paddingLeft="calc(var(--left-offset) * var(--indent-2))",n.role="treeitem",n.setAttribute("aria-owns",`children_${e}`);const l=document.createElement("div"),i=document.createElement("div");i.style.display="flex",i.style.alignItems="center",i.style.justifyContent="center";const r=document.createElement("div");r.style.position="relative",r.style.display="grid",r.style.gridTemplateColumns="1fr";const o=document.createElement("div");o.id=`children_${e}`,o.role="group";const a=document.createElement("div");return a.classList.add("treexplorer-trunk-line"),a.style.backgroundColor="currentColor",a.style.zIndex="1",a.style.position="absolute",a.style.top="0",a.style.left="calc(\n    var(--left-offset)  * var(--indent-2) +\n    var(--arrow-div-width-2) / 2 -\n    var(--children-line-width-2) / 2)",a.style.width="var(--children-line-width-2)",a.style.bottom="0",t.appendChild(n),t.appendChild(r),n.appendChild(i),n.appendChild(l),r.appendChild(a),r.appendChild(o),{container:t,arrow:i,item:n,itemContent:l,children:o}}function l(e){if(e.expanded&&null!=e.family.children&&e.family.children.length>0){l(e.family.children[e.family.children.length-1])}else e.HTML.item.focus()}function i(e){if(e.family.beforeSiblings.length>0){l(e.family.beforeSiblings[e.family.beforeSiblings.length-1])}else null!=e.family.parent&&e.family.parent.HTML.item.focus()}function r(e){return t=>{const n=document.createElement("div");return n.style.whiteSpace="nowrap",n.textContent=e(t),n}}function o(e,t){return n=>{const l=document.createElement("div");l.style.display="flex",l.style.gap="0.5em";const i=document.createElement("img");i.src=t(n);const r=document.createElement("span");return r.style.whiteSpace="nowrap",r.textContent=e(n),l.appendChild(i),l.appendChild(r),l}}function a(l){const o=Object.assign({getChildren:e=>null,getHTML:r((e=>o.getId(e))),getIsInteractive:e=>!0,hideRoots:!1},l),a=[],d=new Map;let s=null,c=[],u=0;function f(e,t){t=void 0===t?!e.selected:t,e.selected!=t&&(s&&(s.selected=!1,y(s)),e.selected=t,y(e)),t&&(s=e,c.forEach((t=>{t(e.object)})))}function m(e,t,n){let l=!e.expanded;if(null!=t&&(l=t),e.expanded=l,null!=t&&t&&null!=n&&n){const t=e.family.parent;if(null!=t)return m(t,!0,!0)}return e}function p(e,t){const l=o.getId(e),i=null===t?[]:[...t.path,t.id],r=d.get(l),a=null!=r?r:function(e,t,l,i){return{id:e,path:t,object:l,HTML:n(e),family:{parent:i,children:null,beforeSiblings:[],afterSiblings:[]},expanded:!1,selected:!1}}(l,i,e,t);return d.set(a.id,a),a}function y(t){return e(this,void 0,void 0,(function*(){const e=document.activeElement;t.HTML.item.classList.toggle("non-interactive",!o.getIsInteractive(t.object)),o.getIsInteractive(t.object)?(t.HTML.item.tabIndex=1,t.HTML.item.addEventListener("click",h),t.HTML.item.addEventListener("keydown",g)):(t.HTML.item.tabIndex=-1,t.HTML.item.removeEventListener("click",h),t.HTML.item.removeEventListener("keydown",g));const n=t.path.length-u;t.HTML.container.style.setProperty("--left-offset",""+1*n),t.HTML.item.ariaLevel=`${n}`,t.HTML.item.style.display=n<0?"none":"grid",t.HTML.itemContent.innerHTML="",t.HTML.itemContent.appendChild(o.getHTML(t.object));let l=o.getChildren(t.object);if(l instanceof Promise&&(l=yield l),null==l)t.family.children=null,t.HTML.arrow.innerHTML="",t.HTML.children.style.display="none";else{t.family.children=[],t.family.children=l.map((e=>p(e,t))),t.HTML.children.innerHTML="";for(const e of t.family.children)t.HTML.children.appendChild(e.HTML.container),yield y(e);t.expanded?(t.HTML.arrow.innerHTML="&#11167;",t.HTML.children.style.display="block"):(t.HTML.arrow.innerHTML="&#11166;",t.HTML.children.style.display="none")}const i=null===t.family.parent?a:t.family.parent.family.children;if(null!=i){const e=i.findIndex((e=>e.id===t.id));t.family.beforeSiblings=i.slice(0,e),t.family.afterSiblings=i.slice(e+1),t.HTML.item.ariaPosInSet=`${e}`}t.HTML.item.classList.toggle("selected",t.selected),null!=e&&e.focus()}))}function h(e){const t=e.target.closest(".treexplorer-node");if(null==t)return;const n=d.get(t.id);null!=n&&(n.expanded=!n.expanded,f(n,!0),y(n))}function g(e){const t=e.target.closest(".treexplorer-node");if(null==t)return;const n=d.get(t.id);null!=n&&("ArrowUp"===e.key?(e.preventDefault(),i(n)):"ArrowDown"===e.key?(e.preventDefault(),function(e){e.expanded&&null!=e.family.children&&e.family.children.length>0?e.family.children[0].HTML.item.focus():e.family.afterSiblings.length>0?e.family.afterSiblings[0].HTML.item.focus():null!=e.family.parent&&e.family.parent.family.afterSiblings.length>0&&e.family.parent.family.afterSiblings[0].HTML.item.focus()}(n)):"ArrowRight"===e.key?(e.preventDefault(),function(e){if(null!=e.family.children){if(!e.expanded)return e.expanded=!0,!0;e.family.children.length>0&&e.family.children[0].HTML.item.focus()}return!1}(n)&&y(n)):"ArrowLeft"===e.key?(e.preventDefault(),function(e){return null!=e.family.children&&e.expanded?(e.expanded=!1,!0):(null!=e.family.parent&&e.family.parent.HTML.item.focus(),!1)}(n)&&y(n)):"Enter"===e.key&&(n.expanded=!n.expanded,f(n,!0),y(n)))}const L={HTML:t(),setRoots:e=>(o.roots=e,a.length=0,L.HTML.innerHTML="",Array.isArray(o.roots)||(o.roots=[o.roots]),o.roots.forEach((e=>{const t=p(e,null);a.push(t),L.HTML.appendChild(t.HTML.container)})),L),setGetId:e=>(o.getId=e,L),setGetHTML:e=>(o.getHTML=e,L),setGetChildren:e=>(o.getChildren=e,L),update:()=>(a.forEach((e=>{y(e)})),L),updateNode(e){if(d.has(e)){const t=d.get(e);null!=t&&y(t)}return L},addSelectListener:e=>(c=[...c,e],L),removeSelectListener:e=>(c=c.filter((t=>t!=e)),L),collapseAll:()=>(d.forEach((e=>{e.path.length>=u&&(e.expanded=!1)})),L),expandAll:()=>(d.forEach((e=>{e.expanded=!0})),L),collapseNode(e){if(d.has(e)){const t=d.get(e);null!=t&&m(t,!1,!1)}return L},expandNode(e){if(d.has(e)){const t=d.get(e);null!=t&&m(t,!0,!1)}return L},makeNodeVisible(e){if(d.has(e)){const t=d.get(e);if(null!=t){const e=t.family.parent;if(null!=e){y(m(e,!0,!0)).then((e=>{t.HTML.item.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}))}else t.HTML.item.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}return L},unselectAll:()=>(s&&f(s,!1),L),setSelectedNodeItem(e){if(d.has(e)){const t=d.get(e);null!=t&&(f(t,!0),L.makeNodeVisible(t.id))}return L},toggleRootsVisibility:e=>(o.hideRoots=!e,u=e?0:1,d.forEach((e=>{e.path.length<=u&&(e.expanded=!0)})),L),getRootItems:()=>a.map((e=>e.object)),getNodeItem(e){const t=d.get(e);return null!=t?t.object:null},getSelectedNodeItem:()=>null===s?null:s.object,getNodeItemFamily(e){if(!d.has(e))return null;const t=d.get(e);if(null==t)return null;const n=t.family.parent,l=t.family.beforeSiblings,i=t.family.afterSiblings,r=t.family.children;return{item:t.object,parent:null==n?null:n.object,children:null==r?null:r.map((e=>e.object)),prevSiblings:l.map((e=>e.object)),nextSiblings:i.map((e=>e.object))}}};return L.setGetId(o.getId),L.setGetChildren(o.getChildren),L.setGetHTML(o.getHTML),L.setRoots(Array.isArray(o.roots)?o.roots:[o.roots]),L.toggleRootsVisibility(!o.hideRoots),L.update(),L}"function"==typeof SuppressedError&&SuppressedError;export{a as treexplorer,o as treexplorerImageLabelNode,r as treexplorerLabelNode};
